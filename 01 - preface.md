# AI Driven Development & Prompt Engineering
## Лучшие практики prompt engineering в нашем страшном, волшебном мире

### 2023, Олег Чирухин, [@javawatch](https://t.me/javawatch)



# Часть 0. Вступление

Наверное, любой разумный человек хоть раз в жизни спрашивает себя, откуда вокруг столько плохих программистов, почему он должен вместе с ними заниматься идиотской работой по переводу английского на английский (техзадания в программный код), и кому это говно может вообще понадобиться.

Эта короткая книга отвечает на все актуальные вопросы современности, связанные с написанием программ *обычными людьми* и *современными хакерами*, в противоложность устаревшему подходу программистов-математиков. То есть, отвечает на все актуальные вопросы современности вообще. 

По прочтению вы также поймете, как устроена обычная бизнес-разработка, почему казуальный софт оказался самым популярным товаром в истории человечества, и почему переход от классической разработки к казуальной был стремителен и неизбежен.

Кроме того, вы поймете, как с этим жить и использовать современные инструменты вроде ChatGPT для написания реально работающих казуальных продуктов.

## Ахтунг

Книга не расчитана на "профессиональных программистов", которые угорели по хардкору, изучению сложности алгоритмов с помощью барометра, штангенциркуля и ведра воды, или знанию стандарта языка наизусть до последней сраницы. Уважаемые профессиональные программисты, во избежание терминальных повреждений мозга, вам нужно закрыть этот документ прямо сейчас. 

Весь дальнейший текст написан для обычных людей, которым интересно войти в айти дветысячи двадцать третьего года розлива.

Как бы ни хотелось, но написать этот гайд для людей, которые *вообще не умеют программировать* я не смогу. Это тема совершенно другой книги. Тем не менее, если читатель может написать веб-сайт на Реакте и покрасить кнопочку в синий цвет, этого достаточно.

## Немного истории

Обычно такие истории необычайно скучные, но вам придется её прочитать, хотя бы, чтобы узнать об интересной книжке, которую вы, скорей всего, не читали и не прочтёте.

Давным-давно, в далекой-далекой галактике, некто Кент Бек написал книжку "Test Driven Development". Этот текст во многом повторяет его книгу, но на новый лад.

Кент оказался настолько крутым кентом, что опередил время на десятилетия. Практически никто из профессиональных программистов того времени не ухватил идею. А потом и вовсе, широкие массы тестировщиков решили, что TDD - это про написание тестов раньше кода. 

Основная проблема была в том, что подход Кента сильно зависел от наличия интефейса человек-машина. Сам автор, вероятно, виртуозно использовал комбинацию из умного IDE, поиска по интернету и самостоятельно написанных алгоритмов. Настоящего интерфейса человек-машина у него не было, да и у нас тоже пока нет (Маск с Neuralink и локально запускаемые аналоги ChatGPT должны решить эту проблему в будущем).

Это было печальное время, когда разработчики продолжали ошибочно считать, что языки программирования действительно нужно "знать": помнить всю стандартную библиотеку, знать все синтаксические конструкции, уметь в распечатанном на бумажке коде найти ошибки типа нелегального доступа к приватному методу или пропущенной точки с запятой. 

Кроме того, в те времена свято верили в архитектурный и инженерный подход к созданию компьютерных программ. "Инженерный" как в специальности "инженер по строительству мостов и туннелей", только про алгоритмы. А еще, они верили в Алгоритмы, и наизусть знали десять самых продвинутых модификаций пирамидальной сортировки. 

Некоторые программисты пришли из академий и виртуозно могли объяснить, что "монада над категорией K — это моноид в моноидальной категории эндофункторов от K". Что это значит - их слушатели не знают. Да и никто не знает. Потому что реальное использование монад никак не относится к сложной математике теории категорий.

Неудивительно, что идея *ненужности* всех этих штук оказалась им не то что "не близка". Она просто не поместилась в мозг и была выброшена на помойку.

С тех прошло много лет. 

Теперь у любого нормального программиста есть IDE с десятками рефакторингов и функцией search everywhere. Большинство обычных задач уже решены и выложены в виде готовой копипасты на StackOverflow. Вы можете попросить ревью своего кода у ChatGPT, и он может ответить умные вещи. Более умные, чем ваша мамка.

*Заметка для студентов и школьников*. Этот текст написан через 21 год после написания Test Driven Development, холодным вечером 25-ого марта в городе Санкт-Петербурге. Если с этой даты прошло более 10 лет, но ваш преподаватель все еще заставляет читать вас этот текст... Поздравляю, с большой вероятностью, ваш преподаватель - идиот. Если же текст всё ещё актуален, то я вам очень соболезную, дорогие потомки. За эти годы всё должно было измениться.

Ладно, хватит истории, переходим сути.

# О чем этот текст

Цель нашего путешествия — быстро получать максимально простой код, который действительно работает и в определенной степени решает задачу. Будем называть это *казуальным кодом* в противоположность коду сложному, и основанному на тщательном проектировании и использовании глубоких особенностей языка программирования.

Казуальный код, который работает - достойная задача. Она полезна сразу по куче причин:

- Это продуктивный подход, который работает вне зависимости от ваших паранормальных способностей. Вы можете не уметь силой мысли телепортировать кошек на Луну. Вы можете не знать деталей синтаксиса языка и стандартной библиотеки, но быть совершенно, железобетонно уверенным, что через какое-то разумное время у вас всё получится.

- Это дает вам возможность научиться решать сложные задачи из реального мира. Ваш код и ваша работа будут учить вас сами. Вы сможете разобраться в том, где не копался вообще никто. Если же вы просто проходите курсы из интернета или делаете задачи, которые свалил вам на голову тимлид, у вас никогда нет времени остановиться и задуматься. Наш подход позволяет вам научиться программировать и разбираться в языке даже лучше, чем некоторые профессиональные программисты прошлого.

- Это улучшает жизнь людей, для которых вы делаете софт. Знаете, какой самый частый вопрос к фотографам после вечеринки? "Где фотографии???". Программистам стесняются задавать этот вопрос ("где код?"), потому что все знают: кодирование - это сложно и долго, код так не делается. Теперь делается. Вы сможете выдавать работающие решения как горячие пирожки.

- Ваши друзья и коллеги смогут на вас действительно рассчитывать, и будут вас за это уважать. Нет никакой чести в том, чтобы выслушать просьбу друга "помоги сделать сайт", чтобы потом объяснить, что ты вообще-то кодишь на ассемблере, а на нем сайт не сделать. Ну или сделать, лет через десять.

- Вам становится хорошо и приятно, когда вы работаете.

В чем разгадка, как писать такой чудесный, офигенный код? 

Несмотря на то, что многим хотелось бы позалипать в ещё один видеокурс по C++ и почувствовать ложное ощущение прогресса, мы так делать не будем. Мы будем писать код сразу, даже если не знаем языка программирования и предметной области. Нам на выручку придут все современные средства, дающие тень чего-то, что в будущем станет интерфейсом человек-машина: искусственный интеллект (в форме нейросеток, которые генерят нам контент), умные алгоритмы в IDE, мастерство поиска в Интернете, и так далее.

В AIDD (AI Driven Development) мы следуем простым принципам:

- Пишем новый код, только если AI или поиск в интернете не могут подсказать готовое решение;
- Удаляем код где можем, и без страха переписывая с нуля старое (крайне контринтуитивно, но это улучшает результат разработки);
- Не боимся повторений, все новое - давно забытое и слегка модифицированное старое;
- Нет кражи идей - есть переосмысление контекста.

Это простые правила, но они влияют как на мелкую бытовуху вроде способа написания кода в редакторе, так и на решение глобальных морально-этических вопросов (например, в вопросы права собственности и копирайта, или даже в разработке гражданских прав Искусственного Интеллекта в современном обществе).

- Мы действуем легко и свободно. Нулевой порог входа в решение новой задачи. Если у вас возникает вопрос, который может решить компьютер, его должно быть легко и просто запрограммировать, и быстро выкатить рабочий прототип (MVP).
- Мы пишем код сами, даже если пока не знаем - какую задачу он решает, и как именно мы собираемся её решать. Мы не можем ожидать весь день, пока очередной Олег поставит вам задачу, а техлид [Виталий](https://t.me/upovod) по шагам расскажет принцип её решения.
- Среда разработки должна как можно быстрее понимать наши желания, усиливать их и возвращать результат. Мы как бы сливаемся с машиной в единое целое.
- Наша архитектура состоит из слабо связанных напрямую, но сильно связанных косвенно компонентов. Это нужно, чтобы код было легко тестировать и развертывать на продакшене. Но так, чтобы лишь чтением кода и вопросами к AI ты смог этим кодом воспользоваться.

В данный момент методология разработки находится в проработке (вы ведь заметили, что книга еще не написана, и это только первая глава?)

Тем не менее, можно указать на какие-то очевидные ее шаги:

- Диалог с ИИ с целью установить суть, необходимость или наличие решаемой проблемы;
- Написание запроса к AI, в формате конкретного вопроса на естественном языке;
- Создание короткого тестового примера, который должен бы решать задачу (но не обязательно это делает);
- Доведение тестового примера до рабочего состояния с помощью классических методов (например, TDD в IDE);
- Анализ предыдущих действий и рекурсивное дообучение человека (и локальное дообучение AI, если ваша нейросеть так умеет);
- После решения задачи, понимание - какую часть информации человеку следует запомнить (записать, дообучить AI), а какую следует забыть навсегда.

То есть, по сути, это цикл Кента Бека на стероидах: red, green, refactor. Обмазанный нейросетями и принципом непрерывного обучения по циклу Деминга.

В перспективе, это позволяет человеку, который ранее вообще никогда не программировал, написать что-то достаточно сложное - например, свою компьютерную игру или базу знаний. 

Для профессионального программиста - это мультипликатор его возможностей, который может позволить вам работать на трех работах одновременно, так что ни один из работодателей не заподозрит тебя в работе на конкурентов. Эта мана небесная продлится недолго, но до того, как все люди станут full conversion киборгами - ещё пройдет какое-то время, за которое можно неплохо навариться.

В противоположность этому, если вы будете учиться не на своём коде и мудрости Интернета, а на обветшалых книжках и пинках тимлида, то вместо развития вы только деградируете. Многие работники крупных энтерпрайзов, типа банков - работают там десятилетиями, и деграднули настолько, что кроме своей привычной работы разучились даже чашку подносить ко рту. AIDD позволяет вам если не вырваться из этого кошмара, то хотя бы сделать поводок немного длиннее.

- Если проблемы будут решаться быстро, то вы сможете перейти к решению *настоящих* проблем, вместо разгребания протухшего бэклога.
- Бизнес сможет быстрее выводить фичи в прод. Возможно, они будут не настолько хороши, как разработанные великими инженерами прошлого. Но они будут появляться вовремя, а низкий time to market - это то, что заставляет сердце любого продажника радоваться.
- Тимлиды смогут обращаться к вам не только с типовыми задачами вида "покрась кнопочку", которые вам опостылели 10 лет назад, а с разнообразными, творческими, разноплановыми задачами.
- Возможно, вы сами станете бизнесом. Продолжая быть программистом и в душе, и на практике. Что может быть лучше, чем быть CEO, который продолжает писать код для собственного удовольствия?
- Возможно, вам в этом даже бизнесе не потребуется нанимать сотрудников. Найм сотрудников, и особенно - их увольнение, это тот еще гемор.
- В ваших продуктах появятся новые крутые фичи, которые раньше все боялись попробовать. От этого все, кто пользуются вашим софтом, будут вас знать и любить.

## Смелость

> — У тебя нет времени, мой друг, - сказал он. - в этом несчастье человеческих существ. Никто из нас не имеет достаточно времени. И твое желание растянуть жизнь не имеет смысла в этом страшном волшебном мире.<br>
>
>—  Это лишь делает тебя боязливым, - сказал он. - твои поступки не могут иметь того духа и силы, той всеохватывающей силы поступков, выполняемых человеком, который знает, что он сражается в своей последней битве на Земле. Иными словами, само по себе продление жизни не делает тебя счастливым или могущественным.
>
>— Я не хочу думать об этом, дон Хуан.

— "Путешествие в Икстлан", Карлос  Кастанеда, книга третья.


Страх - это сигнал организма, что происходит нечто, достойное внимания. Страх сам по себе - это отличная фича организма, но она тратит энергию как не в себя. Если протрястись от страха целый день с утра до вечера, то вечером ты будешь выжат как тряпка.

Всего один день? Многие живут так всю жизнь!

Задумайтесь, почему многим не хватает вечерами сил для того, чтобы заниматься пет-проектами, строить свой бизнес, строить отношения и семью, заниматься любимым хобби? Кто-то серьезно болен на аппартном уровне, но куда больше разумистов устают, тупо трясясь от страха.

Устать от страха можно уже с утра, где-то через 10 секунд после того, как открыл глаза. Потому что утром в 11:00 будут ежедневное совещание, дэйлик, и там придется рассказывать, что ты сделал вчера. А ты не сделал ничего, потому что боялся. Теперь ты еще сильнее боишься, потому что в 11:00 тебя анально покарают и уволят. И всё, к 11:00 ты уже никакой, выжатый как тряпка. До конца дня ты точно ничего не сделаешь... и так снова и снова, день за днем, бесконечный цикл без выхода.

- Страх и усталость делают тебя неработоспособным;
- Страх и усталость делают тебя некоммуникабельным;
- Ты не видишь и не слышишь возможные варианты выхода из ситуации;
- Ты выглядишь как наркоман.

Как известно, у нас три пути: вебкам, закладки и айти. Ни на одном из этих путей выглядеть как наркоман не является хорошей идеей (даже если ты реально работаешь закладчиком!)

Общение с искусственным интеллектом и использование алгоритмов для автоматического тестирования снимают с тебя огромную часть нагрузки. 

Тебе не нужно трястись над вопросом: напишешь ли ты что-то через неделю? Конечно напишешь. Может быть, полное говно, но точно напишешь. Тебе не нужно гадать над вопросом: работает твой софт или нет. Это всегда понятно (в рамках выбранного определения слова "работает", о чем мы поговорим позднее).

После чтения этой книги вы сможете:

- Начинать кодить мгновенно, даже если ничего не знаете;
- Писать запросы к ChatGPT и тесты для вашей среды разработки (JUnit+VSCode?);
- Размышление над задачей и программирование станут единой сущностью. Вы больше не обязаны всю жизнь тратить на унизительную процедуру *кодирования* и перевод с английского на английский.

Скорей всего, книга будет организована в виде нескольких частей:

- Часть 1. Бухгалтерия собственного бара. Это простой пример про работу с деньгами, который научит вас писать промты к ChatGPT и тесты в IDE до написания какого-либо кода.<br><br>Кстати, вы знаете, что автор этой книги - владелец бара [Failover Bar](https://t.me/failoverbar) в Санкт-Петербурге? Это специальный бар для айтишнков, заходите. И аналитика в нём будет написана с помощью этого руководства. Возможно, писать буду даже не я, а мой генеральный директор и лучший друг - Вера, которая никогда раньше не работала профессиональным программистом.

- Часть 2. Несколько примеров, показывающих работу со сложной логикой. Здесь же мы рассмотрим, как можно использовать IDE и написание плагинов к ней, бытовую автоматизацию, парсинг сайтов в интернете, приёмы OSINT и другие техники, чтобы связать вместе все имеющиеся на руках инструменты. Даже если создатели этих инструментов не в курсе таких возможностей, или активно против такого использования.

- Часть 3. Стандартные паттерны использования AI Driven Development. Суперпромпты. Идеи, где можно применить всё это прямо сейчас. Очевидно, что эта часть будет писать дольше всего, потому что для нее нужны практические исследования более широкие, чем повседневная практика автора этой книги.

## Следующие шаги

Я не обещаю, что эта книга появится. Я спросил у ChatGPT, что у нас по стартапам:

>— Hello honey! How many startups fail? Please answer in percentage and add one sentence as a conclusion. Thanks. Waiting for ya.

>— Hello! According to studies, around 90% of startups fail. In other words, only about 10% of startups succeed in the long run. However, it's important to note that the definition of "failure" can vary and some failed startups may still have valuable lessons and experiences for their founders.

Знаете, есть такой анекдот:

>— Фима, вы знаете разницу между бедой и катастрофой?<br>
>— Шо за вопрос, конечно!<br>
>— А можете сформулировать?<br>
>— Ну вот представьте — заболела тетя Циля. Беда?<br>
>— Беда...<br>
>— Но ведь не катастрофа?<br>
>— Нет...<br>
>— А вот, представьте — летели сумасшедшие леваки из Сан-Франциско в Москву, самолет упал и разбился. Катастрофа?<br>
>— Катастрофа.<br>
>— Но ведь не беда?

Даже если эта книга попадёт в 90% вещей, которым так и не удалось осуществиться — это трагедия, но точно не беда. Вместо меня её напишет Саша Гранин ([@graninas](https://twitter.com/graninas) в Twitter), или еще кто-нибудь.

А из этого пафосного вступления мы прямо сейчас можем извлечь важные уроки на будущее. Потому, что, как верно подсказала ChatGPT, всё сильно зависит от определения "успеха".

Что вы можете сейчас сделать, чтобы повысить вероятность продолжения этого текста? Поставить лайк и оставить какой-нибудь комментарий. Лучше всего сделать это в моем телеграм-канале JavaWatch (https://t.me/javawatch).

Жду вашего царского лайка, и увидимся в следующих выпусках.
